
\documentclass[11pt,a4paper]{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage{lmodern}
\usepackage{geometry}
\geometry{margin=2.2cm}

\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage{listings}
\lstdefinestyle{mcee}{
  basicstyle=\ttfamily\small,
  columns=fullflexible,
  breaklines=true,
  frame=single,
  rulecolor=\color{black!25},
  backgroundcolor=\color{black!2},
  keywordstyle=\color{blue!60!black},
  commentstyle=\color{green!40!black},
  stringstyle=\color{orange!60!black},
  showstringspaces=false,
  tabsize=2
}
\lstset{style=mcee}

\title{MCEE --- R√©sum√© Technique pour le D√©veloppement\\\large (avec Syst√®me de Phases)}
\author{}
\date{\today}

\begin{document}
\maketitle
\tableofcontents
\newpage

\section{Vue d'ensemble}
Le \textbf{MCEE} (\emph{Mod√®le Complet d'√âvaluation des √âtats}) est un syst√®me √©motionnel complet int√©grant :
\begin{itemize}[leftmargin=1.2em]
  \item \textbf{24 √©motions instantan√©es} (pr√©dites par le module C++) ;
  \item \textbf{Syst√®me de phases √©motionnelles} (8 phases qui modulent le comportement) ;
  \item \textbf{Graphe de m√©moire Neo4j} (souvenirs, concepts, traumas) ;
  \item \textbf{M√©canismes de fusion et modulation} (adaptatifs selon la phase) ;
  \item \textbf{Syst√®me d'urgence \textquotedblleft Amyghaleon\textquotedblright} (d√©clench√© selon la phase).
\end{itemize}

\section{Architecture des composants (avec phases)}
\subsection{Sch√©ma d'ensemble}
\begin{lstlisting}[language={},caption={Architecture (ASCII)}]
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Capteurs      ‚îÇ ‚Üí Donn√©es environnementales
‚îÇ   Feedbacks     ‚îÇ ‚Üí Fb_ext (externe), Fb_int (interne)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Module C++     ‚îÇ ‚Üí Pr√©dit 24 √©motions E_i(t)
‚îÇ  (emotion)      ‚îÇ    depuis 14 dimensions
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üé≠ Phase Detector                                  ‚îÇ
‚îÇ  D√©tecte la phase √©motionnelle actuelle             ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  Input:  24 √©motions                                ‚îÇ
‚îÇ  Output: Phase + PhaseConfig (Œ±,Œ≤,Œ≥,Œ¥,Œ∏,seuils)      ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  Phases: SERENITE | JOIE | EXPLORATION | ANXIETE     ‚îÇ
‚îÇ          PEUR | TRISTESSE | DEGOUT | CONFUSION       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  MCEE Engine    ‚îÇ ‚Üí Mise √† jour E_i(t+1) avec coefficients de phase
‚îÇ  (Python)       ‚îÇ    Fusion ‚Üí E_global(t+1)
‚îÇ                 ‚îÇ    Applique les param√®tres de la phase active
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Neo4j Graphe   ‚îÇ ‚Üí Souvenirs, concepts, traumas
‚îÇ  M√©moire        ‚îÇ    Activation, oubli, renforcement
‚îÇ                 ‚îÇ    Consolidation modul√©e par phase
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Amyghaleon     ‚îÇ ‚Üí R√©actions d'urgence (seuil selon phase)
‚îÇ  (court-circuit)‚îÇ    Phase PEUR: seuil = 0.50 ‚ö†Ô∏è
‚îÇ                 ‚îÇ    Phase SERENITE: seuil = 0.85 ‚úÖ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
\end{lstlisting}

\subsection{Flux de donn√©es d√©taill√©}
\begin{enumerate}[leftmargin=1.4em]
  \item Le module C++ √©met 24 √©motions $\rightarrow$ RabbitMQ (\texttt{mcee.emotional.input}).
  \item Le \emph{Phase Detector} re√ßoit et analyse $\rightarrow$ d√©tecte la phase actuelle.
  \item Le \emph{Phase Detector} fournit \texttt{PhaseConfig} $\rightarrow$ coefficients adapt√©s.
  \item Le \emph{MCEE Engine} re√ßoit :
  \begin{itemize}[leftmargin=1.2em]
    \item les 24 √©motions brutes ;
    \item la phase actuelle ;
    \item les coefficients $(\alpha,\beta,\gamma,\delta,\theta)$ de cette phase ;
    \item les seuils (Amyghaleon, consolidation, etc.).
  \end{itemize}
  \item Le \emph{MCEE Engine} applique les formules avec les coefficients de phase.
  \item Neo4j est mis √† jour selon les param√®tres de phase.
  \item Amyghaleon v√©rifie le seuil de la phase actuelle.
\end{enumerate}

\section{Syst√®me de phases √©motionnelles}
\subsection{Les 8 phases}
\renewcommand{\arraystretch}{1.15}
\begin{longtable}{>{\bfseries}p{2.6cm} p{1.2cm} p{3.2cm} p{0.9cm} p{0.9cm} p{0.9cm} p{0.9cm} p{1.6cm} p{4.2cm}}
\toprule
Phase & Prio. & Trigger & $\alpha$ & $\delta$ & $\gamma$ & $\theta$ & Seuil Amyg. & Caract√©ristiques\\
\midrule
\endfirsthead
\toprule
Phase & Prio. & Trigger & $\alpha$ & $\delta$ & $\gamma$ & $\theta$ & Seuil Amyg. & Caract√©ristiques\\
\midrule
\endhead
S√âR√âNIT√â & 1 & Calme$>0.5$ & 0.25 & 0.30 & 0.12 & 0.10 & 0.85 & √âquilibre, apprentissage optimal\\
JOIE & 2 & Joie$>0.6$ & 0.40 & 0.35 & 0.08 & 0.05 & 0.95 & Euphorie, renforcement positif\\
EXPLORATION & 2 & Int√©r√™t$>0.6$ & 0.35 & 0.25 & 0.10 & 0.15 & 0.80 & Apprentissage maximal\\
ANXI√âT√â & 3 & Anxi√©t√© $0.5$--$0.8$ & 0.40 & 0.45 & 0.06 & 0.08 & 0.70 & Hypervigilance, biais n√©gatif\\
PEUR & 5 & Peur$>0.8$ & 0.60 & 0.70 & 0.02 & 0.02 & 0.50 & \textbf{URGENCE} --- Traumas dominants\\
TRISTESSE & 3 & Tristesse$>0.6$ & 0.20 & 0.55 & 0.05 & 0.12 & 0.90 & Rumination, introspection\\
D√âGO√õT & 4 & D√©go√ªt$>0.6$ & 0.50 & 0.40 & 0.08 & 0.08 & 0.75 & √âvitement, associations n√©gatives\\
CONFUSION & 2 & Confusion$>0.6$ & 0.35 & 0.50 & 0.15 & 0.15 & 0.80 & Recherche d'info, incertitude\\
\bottomrule
\end{longtable}

\subsection{Transitions entre phases}
\textbf{R√®gles :}
\begin{enumerate}[leftmargin=1.4em]
  \item \textbf{Priorit√©} : la phase \textbf{PEUR} court-circuite toutes les autres.
  \item \textbf{Hyst√©r√©sis} : marge de 0.15 pour √©viter les oscillations.
  \item \textbf{Dur√©e minimale} : 30 secondes avant changement (configurable).
  \item \textbf{Urgence} : Peur $> 0.85$ \textbf{ou} Horreur $> 0.8$ $\rightarrow$ transition imm√©diate.
\end{enumerate}

\textbf{Exemple de s√©quence :}
\begin{lstlisting}[language={}]
S√âR√âNIT√â (120s) ‚Üí EXPLORATION (45s) ‚Üí JOIE (60s) ‚Üí ANXI√âT√â (35s) ‚Üí PEUR (15s)
                                                                        ‚Üì
                                                              AMYGHALEON ACTIV√â
\end{lstlisting}

\section{Formules cl√©s √† impl√©menter (avec phases)}
\subsection{Mise √† jour des √©motions individuelles}
\[
E_i(t+1) = E_i(t) + \alpha_{\text{phase}}\cdot Fb_{\text{ext}} + \beta_{\text{phase}}\cdot Fb_{\text{int}}(t)
- \gamma_{\text{phase}}\cdot \Delta t + \delta_{\text{phase}}\cdot Influence_{\text{Souvenirs}} + \theta_{\text{phase}}\cdot W_t
\]

\subsection{Extrait d'impl√©mentation (Python)}
\begin{lstlisting}[language=Python]
class EmotionUpdater:
    def __init__(self):
        self.alpha = 0.3
        self.beta  = 0.2
        self.gamma = 0.1
        self.delta = 0.4
        self.theta = 0.1

    def set_coefficients_from_phase(self, phase_config):
        self.alpha = phase_config['alpha']
        self.beta  = phase_config['beta']
        self.gamma = phase_config['gamma']
        self.delta = phase_config['delta']
        self.theta = phase_config['theta']

    def update_emotion(self, E_current, fb_ext, fb_int, delta_t,
                       influence_memories, wisdom):
        E_next = (E_current +
                  self.alpha * fb_ext +
                  self.beta  * fb_int -
                  self.gamma * delta_t +
                  self.delta * influence_memories +
                  self.theta * wisdom)
        return max(0.0, min(1.0, E_next))
\end{lstlisting}

\subsection{Variance (d√©tection d'anomalies)}
\[
Var_i(t) = \frac{1}{m}\sum_{j=1}^{m}\left[E_i(t) - S_{i,j}\right]^2
\]

\subsection{Fusion des √©motions (stabilisation \texttt{tanh})}
\[
E_{\text{global}}(t+1) = \tanh\Bigl(E_{\text{global}}(t) + \sum_i \bigl[E_i(t+1)\cdot (1 - Var_{\text{global}}(t))\bigr]\Bigr)
\]

\section{Gestion de la m√©moire (Neo4j) --- modul√©e par phase}
\subsection{Structure des n≈ìuds}
\begin{lstlisting}[language=SQL,caption={Exemple Cypher}]
CREATE (s:Souvenir {
    name: '√âv√©nement X',
    date: date('2025-12-19'),
    emotions: [0.7, 0.2, ...],
    dominant: 'Joie',
    valence: 0.7,
    intensity: 0.8,
    last_activated: datetime(),
    activation_count: 1,
    weight: 0.5,
    type: 'positif',
    state: 'SouvenirConsolider',
    phase_at_creation: 'JOIE'
})
\end{lstlisting}

\subsection{Activation des souvenirs (rappel)}
\begin{lstlisting}[language=Python]
A(S_i) = forget(S_i, t) * (1 + R(S_i)) *
         Œ£[ C(S_i, S_k) * Me(S_i, E_current) * U(S_i) ]
\end{lstlisting}

\subsection{Requ√™tes adapt√©es selon phase}
\begin{lstlisting}[language=Python]
def query_relevant_memories(phase, emotions):
    if phase == 'PEUR':
        query = """
        MATCH (s:Souvenir)
        WHERE s.dominant IN ['Peur', 'Horreur', 'Anxi√©t√©']
           OR EXISTS((s)<-[:CONCERNE]-(t:Trauma))
        RETURN s
        ORDER BY s.intensity DESC, s.weight DESC
        LIMIT 20
        """
    elif phase == 'JOIE':
        query = """
        MATCH (s:Souvenir)
        WHERE s.valence > 0.5
          AND s.dominant IN ['Joie', 'Satisfaction', 'Excitation']
        RETURN s
        ORDER BY s.valence DESC
        LIMIT 10
        """
    else:
        query = """
        MATCH (s:Souvenir)
        WHERE s.last_activated > datetime() - duration({days: 30})
        RETURN s
        ORDER BY s.weight DESC
        LIMIT 10
        """
    return neo4j.run(query)
\end{lstlisting}

\section{Syst√®me d'urgence \textquotedblleft Amyghaleon\textquotedblright}
\subsection{Seuils par phase}
\begin{lstlisting}[language=Python]
AMYGHALEON_THRESHOLDS = {
    'SERENITE':    0.85,
    'JOIE':        0.95,
    'EXPLORATION': 0.80,
    'ANXIETE':     0.70,
    'PEUR':        0.50,
    'TRISTESSE':   0.90,
    'DEGOUT':      0.75,
    'CONFUSION':   0.80
}
\end{lstlisting}

\subsection{Exemple : PEUR vs S√âR√âNIT√â}
\begin{lstlisting}[language=Python]
# Situation identique : Peur = 0.65

# Phase S√âR√âNIT√â (seuil = 0.85)
if 0.65 > 0.85:  # False
    pass

# Phase PEUR (seuil = 0.50)
if 0.65 > 0.50:  # True
    # URGENCE d√©tect√©e, court-circuit
    pass
\end{lstlisting}

\section{Annexe : Tableau complet des phases}
\renewcommand{\arraystretch}{1.15}
\begin{longtable}{>{\bfseries}p{2.6cm} p{0.9cm} p{0.9cm} p{0.9cm} p{0.9cm} p{0.9cm} p{1.6cm} p{1.5cm} p{1.2cm} p{1.2cm} p{4.0cm}}
\toprule
Phase & $\alpha$ & $\beta$ & $\gamma$ & $\delta$ & $\theta$ & Seuil Amyg. & Consolid. & Learn & Focus & Comportement\\
\midrule
\endfirsthead
\toprule
Phase & $\alpha$ & $\beta$ & $\gamma$ & $\delta$ & $\theta$ & Seuil Amyg. & Consolid. & Learn & Focus & Comportement\\
\midrule
\endhead
S√âR√âNIT√â & 0.25 & 0.15 & 0.12 & 0.30 & 0.10 & 0.85 & 0.4 & 1.0 & 0.5 & √âquilibre, apprentissage optimal\\
JOIE & 0.40 & 0.25 & 0.08 & 0.35 & 0.05 & 0.95 & 0.5 & 1.3 & 0.3 & Renforcement positif, risque sous-estim√©\\
EXPLORATION & 0.35 & 0.10 & 0.10 & 0.25 & 0.15 & 0.80 & 0.6 & 1.5 & 0.8 & Apprentissage maximal, attention focalis√©e\\
ANXI√âT√â & 0.40 & 0.30 & 0.06 & 0.45 & 0.08 & 0.70 & 0.4 & 0.8 & 0.6 & Hypervigilance, biais n√©gatif\\
PEUR & 0.60 & 0.45 & 0.02 & 0.70 & 0.02 & 0.50 & 0.8 & 0.3 & 0.95 & URGENCE, traumas dominants\\
TRISTESSE & 0.20 & 0.40 & 0.05 & 0.55 & 0.12 & 0.90 & 0.5 & 0.6 & 0.4 & Rumination, introspection\\
D√âGO√õT & 0.50 & 0.25 & 0.08 & 0.40 & 0.08 & 0.75 & 0.6 & 0.9 & 0.7 & √âvitement, associations n√©gatives\\
CONFUSION & 0.35 & 0.30 & 0.15 & 0.50 & 0.15 & 0.80 & 0.3 & 0.7 & 0.5 & Recherche d'info, incertitude\\
\bottomrule
\end{longtable}

\end{document}
