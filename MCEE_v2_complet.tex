\documentclass[11pt,a4paper]{article}

% --- Encodage & langue ---
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}

% --- Mise en page ---
\usepackage{geometry}
\geometry{margin=2.2cm}
\usepackage{microtype}
\usepackage{hyperref}
\usepackage{xcolor}

% --- Tables & figures ---
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}

% --- Code ---
\usepackage{listings}
\usepackage{inconsolata}
\lstdefinestyle{mcee}{
  basicstyle=\ttfamily\small,
  breaklines=true,
  columns=fullflexible,
  frame=single,
  rulecolor=\color{black!20},
  backgroundcolor=\color{black!2},
  keywordstyle=\color{blue!60!black},
  commentstyle=\color{green!40!black},
  stringstyle=\color{orange!60!black},
  showstringspaces=false
}

% --- Petits helpers ---
\newcommand{\emoji}[1]{\texorpdfstring{#1}{}}

\title{MCEE --- RÃ©sumÃ© Technique pour le DÃ©veloppement\\\large (avec SystÃ¨me de Phases)}
\author{}
\date{\today}

\begin{document}
\maketitle
\tableofcontents
\newpage

\section{Vue d'ensemble}
Le \textbf{MCEE} (ModÃ¨le Complet d'Ã‰valuation des Ã‰tats) est un systÃ¨me Ã©motionnel complet intÃ©grant :
\begin{itemize}
  \item \textbf{24 Ã©motions instantanÃ©es} (prÃ©dites par le module C++)
  \item \emoji{ðŸŽ­} \textbf{SystÃ¨me de phases Ã©motionnelles} (8 phases qui modulent le comportement)
  \item \textbf{Graphe de mÃ©moire Neo4j} (souvenirs, concepts, traumas)
  \item \textbf{MÃ©canismes de fusion et modulation} (adaptatifs selon la phase)
  \item \textbf{SystÃ¨me d'urgence ``Amyghaleon''} (dÃ©clenchÃ© selon la phase)
\end{itemize}

\section{Architecture des composants (avec phases)}
\subsection{SchÃ©ma (ASCII)}
\begin{lstlisting}[style=mcee]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Capteurs      â”‚ â†’ DonnÃ©es environnementales
â”‚   Feedbacks     â”‚ â†’ Fb_ext (externe), Fb_int (interne)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Module C++     â”‚ â†’ PrÃ©dit 24 Ã©motions E_i(t)
â”‚  (emotion)      â”‚    depuis 14 dimensions
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸŽ­ Phase Detector                                  â”‚
â”‚  DÃ©tecte la phase Ã©motionnelle actuelle             â”‚
â”‚                                                      â”‚
â”‚  Input:  24 Ã©motions                                â”‚
â”‚  Output: Phase + PhaseConfig (Î±,Î²,Î³,Î´,Î¸,seuils)    â”‚
â”‚                                                      â”‚
â”‚  Phases: SERENITE | JOIE | EXPLORATION | ANXIETE   â”‚
â”‚          PEUR | TRISTESSE | DEGOUT | CONFUSION      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCEE Engine    â”‚ â†’ Mise Ã  jour E_i(t+1) avec coefficients de phase
â”‚  (Python)       â”‚    Fusion â†’ E_global(t+1)
â”‚                 â”‚    Applique les paramÃ¨tres de la phase active
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Neo4j Graphe   â”‚ â†’ Souvenirs, concepts, traumas
â”‚  MÃ©moire        â”‚    Activation, oubli, renforcement
â”‚                 â”‚    Consolidation modulÃ©e par phase
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Amyghaleon     â”‚ â†’ RÃ©actions d'urgence (seuil selon phase)
â”‚  (court-circuit)â”‚    Phase PEUR: seuil = 0.50 âš ï¸
â”‚                 â”‚    Phase SERENITE: seuil = 0.85 âœ…
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\end{lstlisting}

\subsection{Flux de donnÃ©es dÃ©taillÃ©}
\begin{enumerate}
  \item Le module C++ Ã©met 24 Ã©motions \(\rightarrow\) RabbitMQ (\texttt{mcee.emotional.input})
  \item Le \emph{Phase Detector} reÃ§oit et analyse \(\rightarrow\) dÃ©tecte la phase actuelle
  \item Le \emph{Phase Detector} fournit \emph{PhaseConfig} \(\rightarrow\) coefficients adaptÃ©s
  \item Le \emph{MCEE Engine} reÃ§oit :
  \begin{itemize}
    \item Les 24 Ã©motions brutes
    \item La phase actuelle
    \item Les coefficients \((\alpha,\beta,\gamma,\delta,\theta)\) de la phase
    \item Les seuils (Amyghaleon, consolidation, etc.)
  \end{itemize}
  \item Le \emph{MCEE Engine} applique les formules avec les coefficients de phase
  \item Neo4j est mis Ã  jour selon les paramÃ¨tres de phase
  \item Amyghaleon vÃ©rifie le seuil de la phase actuelle
\end{enumerate}

\section{SystÃ¨me de phases Ã©motionnelles \emoji{ðŸŽ­}}
\subsection{Les 8 phases}
\begin{longtable}{>{\bfseries}p{2.6cm} p{1.4cm} p{2.8cm} p{0.9cm} p{0.9cm} p{0.9cm} p{0.9cm} p{1.6cm} p{4.0cm}}
\toprule
Phase & PrioritÃ© & Trigger & \(\alpha\) & \(\delta\) & \(\gamma\) & \(\theta\) & Seuil Amyg. & CaractÃ©ristiques \\
\midrule
\endhead
SÃ‰RÃ‰NITÃ‰ & 1 & Calme \(>\) 0.5 & 0.25 & 0.30 & 0.12 & 0.10 & 0.85 & Ã‰quilibre, apprentissage optimal \\
JOIE & 2 & Joie \(>\) 0.6 & 0.40 & 0.35 & 0.08 & 0.05 & 0.95 & Euphorie, renforcement positif \\
EXPLORATION & 2 & IntÃ©rÃªt \(>\) 0.6 & 0.35 & 0.25 & 0.10 & 0.15 & 0.80 & Apprentissage maximal \\
ANXIÃ‰TÃ‰ & 3 & AnxiÃ©tÃ© 0.5--0.8 & 0.40 & 0.45 & 0.06 & 0.08 & 0.70 & Hypervigilance, biais nÃ©gatif \\
PEUR (\emoji{âš ï¸}) & 5 & Peur \(>\) 0.8 & 0.60 & 0.70 & 0.02 & 0.02 & 0.50 & \emoji{ðŸš¨} URGENCE --- Traumas dominants \\
TRISTESSE & 3 & Tristesse \(>\) 0.6 & 0.20 & 0.55 & 0.05 & 0.12 & 0.90 & Rumination, introspection \\
DÃ‰GOÃ›T & 4 & DÃ©goÃ»t \(>\) 0.6 & 0.50 & 0.40 & 0.08 & 0.08 & 0.75 & Ã‰vitement, associations nÃ©gatives \\
CONFUSION & 2 & Confusion \(>\) 0.6 & 0.35 & 0.50 & 0.15 & 0.15 & 0.80 & Recherche d'info, incertitude \\
\bottomrule
\end{longtable}

\subsection{Transitions entre phases}
\textbf{RÃ¨gles de transition :}
\begin{enumerate}
  \item \textbf{PrioritÃ©} : la phase \textbf{PEUR} (prioritÃ© 5) court-circuite toutes les autres
  \item \textbf{Hysteresis} : marge de 0.15 pour Ã©viter les oscillations
  \item \textbf{DurÃ©e minimale} : 30 secondes avant changement (configurable)
  \item \textbf{Urgence} : Peur \(>\) 0.85 \textbf{ou} Horreur \(>\) 0.8 \(\rightarrow\) transition immÃ©diate
\end{enumerate}

\textbf{Exemple de sÃ©quence :}
\begin{lstlisting}[style=mcee]
SÃ‰RÃ‰NITÃ‰ (120s) â†’ EXPLORATION (45s) â†’ JOIE (60s) â†’ ANXIÃ‰TÃ‰ (35s) â†’ PEUR (15s)
                                                                        â†“
                                                              AMYGHALEON ACTIVÃ‰
\end{lstlisting}

\subsection{Impact des phases sur le MCEE}
Chaque phase modifie :
\begin{itemize}
  \item \(\alpha,\beta,\gamma,\delta,\theta\) (coefficients MCEE)
  \item le seuil Amyghaleon (sensibilitÃ© aux urgences)
  \item la consolidation mÃ©moire (force de mÃ©morisation)
  \item le focus attentionnel (filtrage des stimuli)
  \item le taux d'apprentissage (vitesse d'adaptation)
\end{itemize}

\section{Formules clÃ©s Ã  implÃ©menter (avec phases)}
\subsection{Mise Ã  jour des Ã©motions individuelles}
\[
E_i(t+1) = E_i(t) + \alpha_{\text{phase}}\cdot Fb_{ext} + \beta_{\text{phase}}\cdot Fb_{int}(t) - \gamma_{\text{phase}}\cdot \Delta t
+ \delta_{\text{phase}}\cdot Influence_{\text{Souvenirs}} + \theta_{\text{phase}}\cdot W_t
\]

\subsection{ImplÃ©mentation (extrait Python)}
\begin{lstlisting}[style=mcee,language=Python]
class EmotionUpdater:
    def __init__(self):
        self.alpha = 0.3
        self.beta = 0.2
        self.gamma = 0.1
        self.delta = 0.4
        self.theta = 0.1

    def set_coefficients_from_phase(self, phase_config):
        self.alpha = phase_config['alpha']
        self.beta  = phase_config['beta']
        self.gamma = phase_config['gamma']
        self.delta = phase_config['delta']
        self.theta = phase_config['theta']

    def update_emotion(self, E_current, fb_ext, fb_int, delta_t,
                       influence_memories, wisdom):
        E_next = (E_current +
                  self.alpha * fb_ext +
                  self.beta  * fb_int -
                  self.gamma * delta_t +
                  self.delta * influence_memories +
                  self.theta * wisdom)
        return max(0.0, min(1.0, E_next))
\end{lstlisting}

\subsection{Variance (dÃ©tection d'anomalies)}
\[
Var_i(t) = \frac{1}{m}\sum_{j=1}^{m}\left(E_i(t) - S_{i,j}\right)^2
\]

\subsection{Fusion des Ã©motions (stabilisation \texorpdfstring{\(\tanh\)}{tanh})}
\[
E_{global}(t+1) = \tanh\left(E_{global}(t) + \sum_i \left(E_i(t+1)\cdot (1 - Var_{global}(t))\right)\right)
\]

\section{Gestion de la mÃ©moire (Neo4j) --- modulÃ©e par phase}
\subsection{Structure des nÅ“uds}
\begin{lstlisting}[style=mcee]
CREATE (s:Souvenir {
    name: 'Ã‰vÃ©nement X',
    date: date('2025-12-19'),
    emotions: [0.7, 0.2, ...],  // 24 valeurs
    dominant: 'Joie',
    valence: 0.7,
    intensity: 0.8,
    last_activated: datetime(),
    activation_count: 1,
    weight: 0.5,
    type: 'positif',
    state: 'SouvenirConsolider',
    phase_at_creation: 'JOIE'
})
\end{lstlisting}

\subsection{Seuils Amyghaleon par phase}
\begin{lstlisting}[style=mcee,language=Python]
AMYGHALEON_THRESHOLDS = {
    'SERENITE':    0.85,
    'JOIE':        0.95,
    'EXPLORATION': 0.80,
    'ANXIETE':     0.70,
    'PEUR':        0.50,
    'TRISTESSE':   0.90,
    'DEGOUT':      0.75,
    'CONFUSION':   0.80
}
\end{lstlisting}

\section{Annexe : tableau complet des phases}
\begin{longtable}{>{\bfseries}p{2.6cm} p{0.9cm} p{0.9cm} p{0.9cm} p{0.9cm} p{0.9cm} p{1.6cm} p{1.6cm} p{1.2cm} p{1.0cm} p{4.2cm}}
\toprule
Phase & \(\alpha\) & \(\beta\) & \(\gamma\) & \(\delta\) & \(\theta\) & Seuil Amyg. & Consolidation & Learning & Focus & Comportement \\
\midrule
\endhead
SÃ‰RÃ‰NITÃ‰ & 0.25 & 0.15 & 0.12 & 0.30 & 0.10 & 0.85 & 0.4 & 1.0 & 0.5 & Ã‰quilibre, apprentissage optimal \\
JOIE & 0.40 & 0.25 & 0.08 & 0.35 & 0.05 & 0.95 & 0.5 & 1.3 & 0.3 & Renforcement positif, risque sous-estimÃ© \\
EXPLORATION & 0.35 & 0.10 & 0.10 & 0.25 & 0.15 & 0.80 & 0.6 & 1.5 & 0.8 & Apprentissage maximal, attention focalisÃ©e \\
ANXIÃ‰TÃ‰ & 0.40 & 0.30 & 0.06 & 0.45 & 0.08 & 0.70 & 0.4 & 0.8 & 0.6 & Hypervigilance, biais nÃ©gatif \\
PEUR & 0.60 & 0.45 & 0.02 & 0.70 & 0.02 & 0.50 & 0.8 & 0.3 & 0.95 & URGENCE --- Traumas dominants \\
TRISTESSE & 0.20 & 0.40 & 0.05 & 0.55 & 0.12 & 0.90 & 0.5 & 0.6 & 0.4 & Rumination, introspection \\
DÃ‰GOÃ›T & 0.50 & 0.25 & 0.08 & 0.40 & 0.08 & 0.75 & 0.6 & 0.9 & 0.7 & Ã‰vitement, associations nÃ©gatives \\
CONFUSION & 0.35 & 0.30 & 0.15 & 0.50 & 0.15 & 0.80 & 0.3 & 0.7 & 0.5 & Recherche info, incertitude \\
\bottomrule
\end{longtable}

\end{document}
